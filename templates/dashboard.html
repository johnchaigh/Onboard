{% extends "layout.html" %}

{% block title %}
Dashboard
{% endblock %}

{% block main %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js/dist/Chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-trendline"></script>

<div class="homepagebackground">
<h2 class="uk-text-center uk-text uk-text-lighter">Dashboard</h2>
  <div class="uk-card uk-card-default uk-card-small uk-padding uk-padding-medium">



    <div class="uk-grid-column-small uk-grid-row-small uk-child-width-1-3@s uk-text-center" uk-grid>
        <div>
            <div class="uk-card uk-card-default uk-card-body"><a href="/people"><img src="static/images/opportunity.svg" alt="piechart"class="icon"></a>
            <p class="uk-text uk-text-light">People</p>
          </div>
        </div>
        <div>
            <div class="uk-card uk-card-default uk-card-body"><a href="/pathways"><img src="static/images/rocket-launch.svg" alt="piechart"class="icon"></a>
              <p class="uk-text uk-text-light">Pathways</p>
              </div>
        </div>
        <div>
            <div class="uk-card uk-card-default uk-card-body"><a href="/report"><img src="static/images/pie-chart.svg" alt="piechart"class="icon"></a>
              <p class="uk-text uk-text-light">Reports</p>
              </div>
        </div>
    </div>



  <div  class="uk-padding" uk-filter="target: .js-filter">
    <ul class="uk-subnav uk-subnav-pill uk-text-center" id="center">
        <li class="uk-active" uk-filter-control><a href="#">All</a></li>
        <li uk-filter-control="[data-color='business']"><a href="#">Business Performance</a></li>
        <li uk-filter-control="[data-color='progress']"><a href="#">Pathway Performance</a></li>
    </ul>

    <ul class="js-filter uk-child-width-1-2 uk-text-center" uk-grid>
        <li data-color="business">
            <div class="uk-card uk-card-default uk-card-body">
              <p class="uk-text uk-text-lighter">Total Business: £{{ totalbusiness }}<p>
              <canvas id="incomechart1"></canvas>

               <script>

                  var incomechart1 = document.getElementById("incomechart1");

                  var income = {
                    labels: {{ incomelabels | safe }},
                    datasets: [{
                      data: {{ incomedata }},
                      backgroundColor: {{ incomedatacolours | safe }},
                    }]
                  };

                  var chartOptions = {
                    startAngle: -Math.PI / 4,
                    legend: {
                      position: 'right'
                    },
                    animation: {
                      animateRotate: true
                    }

                };

                var polarAreaChart = new Chart(incomechart1, {
                  type: 'polarArea',
                  data: income,
                  options: chartOptions
                });

              </script>
            </div>
        </li>

        <li data-color="progress">
            <div class="uk-card uk-card-default uk-card-body">
              <p class="uk-text uk-text-lighter">Distribution of People<p>
              <canvas id="pathwaychart1"></canvas>
               <script>
                 var ctx = document.getElementById("pathwaychart1").getContext('2d');
                  var myChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                      labels: {{ pathwaynames | safe }},
                      datasets: [{
                        backgroundColor: {{ incomedatacolours | safe }},
                        data: {{ pathwaynumbers | safe }}
                      }]
                    }
                  });

              </script>
            </div>
        </li>

        <li data-color="progress">
            <div class="uk-card uk-card-default uk-card-body">
              <p class="uk-text uk-text-lighter">Longest in Pathway<p>
                <canvas id="longestinpathway"></canvas>
                <script>


                var longestinpathwayCxt = document.getElementById("longestinpathway").getContext("2d");
                var longestinpathwayData = {
                    labels: {{ longestinpathwaynames | safe }},
                    datasets: [{
                        label: ['Days in pathway'],
                        data: {{ longestinpathwaydaysin | safe }},
                        backgroundColor: {{ incomedatacolours | safe }},
                        hoverBackgroundColor: ["#66A2EB", "#FCCE56"]
                    }]
                };

                var longestinpathway = new Chart(longestinpathwayCxt, {
                    type: 'horizontalBar',
                    data: longestinpathwayData,
                    options: {
                      legend: {display: false},
                        scales: {
                            xAxes: [{
                                ticks: {
                            		min: 0
                                }
                            }],
                        }

                    }
                });
                </script>
            </div>
        </li>

        <li data-color="business">
            <div class="uk-card uk-card-default uk-card-body">
              <p class="uk-text uk-text-lighter">Sales Performance Against Target<p>
                <canvas id="targetperformance"></canvas>
                <script>


                var targetperformanceCxt = document.getElementById("targetperformance").getContext("2d");
                var longestinpathwayData = {
                    labels: {{ longestinpathwaynames | safe }},
                    datasets: [{
                        label: ['Performance on target £'],
                        data: {{ targetperformance | safe }},
                        backgroundColor: {{ incomedatacolours | safe }},
                        hoverBackgroundColor: ["#66A2EB", "#FCCE56"]
                    }]
                };

                var targetperformance = new Chart(targetperformanceCxt, {
                    type: 'bar',
                    data: longestinpathwayData,
                    options: {
                      legend: {display: false},
                        scales: {
                            xAxes: [{
                                ticks: {
                            		min: 0
                                }
                            }],
                        }

                    }
                });
                </script>
            </div>
        </li>

        <li data-color="progress">
            <div class="uk-card uk-card-default uk-card-body">
              <p class="uk-text uk-text-lighter">Top 5 Pathway Progression<p>
                <canvas id="topprogression"></canvas>
                <script>


                var topprogressionCxt = document.getElementById("topprogression").getContext("2d");
                var topprogressionData = {
                    labels: {{ scorenames | safe }},
                    datasets: [{
                        label: ['Score'],
                        data: {{ score | safe }},
                        backgroundColor: {{ incomedatacolours | safe }},

                    }]
                };

                var topprogression = new Chart(topprogressionCxt, {
                    type: 'bar',
                    data: topprogressionData,
                    options: {
                      legend: {display: false},
                        scales: {
                            xAxes: [{
                                ticks: {
                            		min: 0
                                }
                            }],
                        }

                    }
                });
                </script>
            </div>
        </li>

    </ul>

</div>
</div>


  {% endblock %}
