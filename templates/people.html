{% extends "layout.html" %}

{% block title %}
People
{% endblock %}

{% block main %}

<div class="uk-card uk-card-default uk-card-small">
  <div>
    <div class="uk-text-center uk-card-body">
      <h4>People</h4>
    </div>
<div style="padding-right: 30px; padding-bottom: 80px">

</style>
  <canvas id="myChart1" height="150px"></canvas>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
   <script>
   new Chart.Scatter(document.getElementById("myChart1"), {
   type: 'scatter',
   data: {
     labels: {{ labels | safe }},
     datasets: [{
       data: {{ data | safe }},
       showLine: false,
       borderColor: "grey",
       backgroundColor: "grey",
       radius: 8
     }],
   },
   options: {
     tooltips: {
       mode: 'index',
             callbacks: {
               title: function(tooltipItem, data) {
         return data['labels'][tooltipItem[0]['index']];},
                 label: function(tooltipItem) {
                   return + Number(tooltipItem.yLabel) + " days in pathway";
                 }
             }
         },
            responsive: true,
            legend: {display: false},
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Days in Pathway'
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: '% Progress through Pathway'
                    },
                }]
            },
            showLines: false

          }
   });



  </script>
</div>


    <table class="uk-table uk-table-middle uk-table-divider">
      <thead>
        <th><form action='/people' method='post'><button type='submit' class="uk-button uk-button-link" value="name" name='sort'>Name</button></form></th>
        <th><form action='/people' method='post'><button type='submit' class="uk-button uk-button-link" value="pathway" name='sort'>Pathway</button></form></th>
        <th style="text-align: center; vertical-align: middle;"><form action='/people' method='post'><button type='submit' class="uk-button uk-button-link" value="progress" name='sort'>Progress</button></form></th>
        <th style="text-align: center; vertical-align: middle;">Date Enrolled</th>
        <th style="text-align: center; vertical-align: middle;"><form action='/people' method='post'><button type='submit' class="uk-button uk-button-link" value="days" name='sort'>Days Enrolled</button></form></th>
        <th style="text-align: center; vertical-align: middle;">Est Completion</th>
        <th style="text-align: center; vertical-align: middle;"><form action='/people' method='post'><button type='submit' class="uk-button uk-button-link" value="score" name='sort'>Score</button></form></th>

      </thead>
      {% for rows in rows %}
      <tr>
        <td><a href="/viewperson?name={{rows['email']}}"><small>{{rows['firstname']}} {{rows['lastname']}}</small></a></td>
        <td><a href="/progress?name={{rows["email"]}}&pathway={{rows['pathwayEnrolled']}}"><small>{{rows['pathwayEnrolled']}}</small></a></td>
        <td style="text-align: center; vertical-align: middle;"><small>{{rows['pathwayEnrolledProgress']}}%</small></td>
        <td style="text-align: center; vertical-align: middle;"><small>{{rows['pathwayEnrolledDate']}}</small></td>
        <td style="text-align: center; vertical-align: middle;"><small>{{rows['daysinpathway']}}</small></td>
        <td style="text-align: center; vertical-align: middle;"><small>{{rows['estcompletion']}}</small></td>
        <td style="text-align: center; vertical-align: middle;"><small>{{rows['score']}}</small></td>
      </tr>
      {% endfor %}
    </table>

  </div>
  <div id="center">
    <a href="/newperson">Add a Person</a>
  </div>

</div>

{% endblock %}
